{% extends 'topbar.html' %}
{% load static %}

{% block content %}
    <!-- Main Sidebar Container -->
  <aside style="position: absolute; top: 12vh;" class="main-sidebar">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <li class="sadnav-item nav-item">
            <a href="../gallery.html" class="nav-link">
              <i class="nav-icon fas fa-map-marked-alt"></i>
              <span>
                Locations
              </span>
            </a>
          </li>
          <li class="sadnav-item nav-item">
            <a href="../gallery.html" class="nav-link">
              <i class="nav-icon fas fa-search-location"></i>
              <span>
                Scenes
              </span>
            </a>
          </li>
          <li class="sadnav-item nav-item">
            <a href="../gallery.html" class="nav-link">
              <i class="nav-icon fa fa-users"></i>
              <span>
                People
              </span>
            </a>
          </li>
          <li class="sadnav-item nav-item">
            <a href="../gallery.html" class="nav-link">
              <i class="nav-icon fas fa-cubes"></i>
              <span>
                Objects
              </span>
            </a>
          </li>
          <li class="sadnav-item nav-item">
            <a href="{% url 'gallery' %}" class="nav-link">
              <i class="nav-icon fas fa-calendar-alt"></i>
              <span>
                Dates
              </span>
            </a>
          </li>
            </ul>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>


    <div class="mygrid">
        <div class="locations-div">
            <h1 class="stats-text">{{ numbers.location }}</h1>
            <p class="stats-text" style="margin-top: -4vh">locations</p>
        </div>

        <div class="people-div">
            <h1 class="stats-text">{{ numbers.person }}</h1>
            <p class="stats-text" style="margin-top: -4vh">people</p>
        </div>

        <div class="scenes-div">
            <h1 class="stats-text">{{ countTagSource.places }}</h1>
            <p class="stats-text" style="margin-top: -4vh">scenes</p>
        </div>

        <div class="obj-div">
            <h1 class="stats-text">{{ countTagSource.objects }}</h1>
            <p class="stats-text" style="margin-top: -4vh">objects</p>
        </div>
        <div class="piechart">
            <div id="chart1"></div>
        </div>
        <div class="barchart">
            <div id="chart2"></div>
        </div>

    </div>
<script type="text/javascript">
    drawChart();
    function drawChart() {
        countTagsDjango = {{ counts|safe }};
        var dataPoints = [];
        var countTotal = 0;
        var percentages = [];
        for (var key in countTagsDjango) {
            dataPoints.push({ 'y': countTagsDjango[key], 'label': key});
            countTotal = countTotal + countTagsDjango[key];
        }
        for (var key in countTagsDjango) {
            percentages.push(countTagsDjango[key]/countTotal);
        }
        var chart = new CanvasJS.Chart("chart1", {
            theme: "light2", // "light1", "light2", "dark1", "dark2"
            exportEnabled: true,
            animationEnabled: true,
            height: 300,
            title: {
                text: "Top Most Common Tags",
                fontSize: 20,
            },
            data: [{
                type: "doughnut",
                startAngle: 25,
                innerRadius: 60,
                toolTipContent: "<b>{label}</b>: {y}",
                showInLegend: "true",
                legendText: "{label}",
                indexLabelFontSize: 12,
                indexLabel: "{label} - {y}",
                dataPoints: dataPoints
            }]
        });
        chart.render();

}
/*

    // Load google charts
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    // Draw the chart and set the chart values
    function drawChart() {
        countTagsDjango = {{ counts|safe }};
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Element');
        data.addColumn('number', 'Counts');
        for (var key in countTagsDjango) {
            data.addRow([key, countTagsDjango[key]]);
        }
      // Optional; add a title and set the width and height of the chart
      var options = {'title':'Top Most Common Tags', 'pieHole': 0.4};

      // Display the chart inside the <div> element with id="piechart"
      var chart = new google.visualization.PieChart(document.getElementById('chart1'));
      chart.draw(data, options);
    }
    google.charts.setOnLoadCallback(drawBarChart);
    // Draw a bar chart
    function drawBarChart() {
        countTagSourceDjango = {{ countTagSource|safe }};
        var data = new google.visualization.DataTable();

        data.addColumn('string', 'Element');
        data.addColumn('number', 'Counts');
        data.addColumn({type: 'string', role: 'style'});

        var colorcodes = ['#3366cc', '#dc3912', '#ff9900', '#109618', '#990099', '#0099c6']
        var counter = 0

        for (var key in countTagSourceDjango) {
            if(colorcodes.length > counter){
                data.addRow([key, countTagSourceDjango[key], 'color: ' + colorcodes[counter]]);
            } else{
                var randomColor = "#000000".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});
                data.addRow([key, countTagSourceDjango[key], 'color: ' + randomColor]);
            }
            counter++;
        }

        var options = {
        title: "Most Common Tag Sources",
        bar: {groupWidth: "95%"},
        legend: { position: "none" },
      };
      var chart = new google.visualization.BarChart(document.getElementById("chart2"));
      chart.draw(data, options);
    }
*/
</script>





{% endblock %}